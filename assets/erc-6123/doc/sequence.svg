<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" data-diagram-type="SEQUENCE" height="1565px" preserveAspectRatio="none" style="width:1231px;height:1565px;background:#FFFFFF;" version="1.1" viewBox="0 0 1231 1565" width="1231px" zoomAndPan="magnify"><title>SmartDerivativeContract with Settlement-Token and off-chain Valuation Service</title><defs/><g><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="581.0205" x="321.0386" y="28.5352">SmartDerivativeContract with Settlement-Token and off-chain Valuation Service</text><g><title>CP1</title><rect fill="#FFFFFF" height="1346.332" style="stroke:#181818;stroke-width:1;" width="10" x="31.1387" y="128.9766"/></g><g><title>CP2</title><rect fill="#FFFFFF" height="1346.332" style="stroke:#181818;stroke-width:1;" width="10" x="73.416" y="128.9766"/></g><g><title>SDC</title><rect fill="#FFFFFF" height="1242.0898" style="stroke:#181818;stroke-width:1;" width="10" x="290.4824" y="233.2188"/></g><g><title>SettlementToken</title><rect fill="#FFFFFF" height="1346.332" style="stroke:#181818;stroke-width:1;" width="10" x="835.5957" y="128.9766"/></g><g><title>EventHandler</title><rect fill="#FFFFFF" height="1346.332" style="stroke:#181818;stroke-width:1;" width="10" x="961.7109" y="128.9766"/></g><g><title>ValuationService</title><rect fill="#FFFFFF" height="1346.332" style="stroke:#181818;stroke-width:1;" width="10" x="1136.4702" y="128.9766"/></g><rect fill="none" height="570.5898" style="stroke:#000000;stroke-width:1.5;" width="1018.5376" x="10" y="135.9766"/><rect fill="none" height="746.7422" style="stroke:#000000;stroke-width:1.5;" width="1204.0977" x="10" y="720.5664"/><rect fill="none" height="381.3262" style="stroke:#000000;stroke-width:1.5;" width="763.9116" x="264.626" y="1078.9824"/><g><title>CP1</title><rect fill="#000000" fill-opacity="0.00000" height="1365.332" width="8" x="32.1387" y="118.9766"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="36" x2="36" y1="118.9766" y2="1484.3086"/></g><g><title>CP2</title><rect fill="#000000" fill-opacity="0.00000" height="1365.332" width="8" x="74.416" y="118.9766"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="78.2773" x2="78.2773" y1="118.9766" y2="1484.3086"/></g><g><title>SDC</title><rect fill="#000000" fill-opacity="0.00000" height="1365.332" width="8" x="291.4824" y="118.9766"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="294.626" x2="294.626" y1="118.9766" y2="1484.3086"/></g><g><title>SettlementToken</title><rect fill="#000000" fill-opacity="0.00000" height="1365.332" width="8" x="836.5957" y="118.9766"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="840.3071" x2="840.3071" y1="118.9766" y2="1484.3086"/></g><g><title>EventHandler</title><rect fill="#000000" fill-opacity="0.00000" height="1365.332" width="8" x="962.7109" y="118.9766"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="965.8843" x2="965.8843" y1="118.9766" y2="1484.3086"/></g><g><title>ValuationService</title><rect fill="#000000" fill-opacity="0.00000" height="1365.332" width="8" x="1137.4702" y="118.9766"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1140.8428" x2="1140.8428" y1="118.9766" y2="1484.3086"/></g><g class="participant participant-head" data-participant="CP1"><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="26.2773" x="20" y="116.0234">CP1</text><ellipse cx="36.1387" cy="50.9883" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M36.1387,58.9883 L36.1387,85.9883 M23.1387,66.9883 L49.1387,66.9883 M36.1387,85.9883 L23.1387,100.9883 M36.1387,85.9883 L49.1387,100.9883" fill="none" style="stroke:#181818;stroke-width:0.5;"/></g><g class="participant participant-tail" data-participant="CP1"><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="26.2773" x="20" y="1496.8438">CP1</text><ellipse cx="36.1387" cy="1508.2969" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M36.1387,1516.2969 L36.1387,1543.2969 M23.1387,1524.2969 L49.1387,1524.2969 M36.1387,1543.2969 L23.1387,1558.2969 M36.1387,1543.2969 L49.1387,1558.2969" fill="none" style="stroke:#181818;stroke-width:0.5;"/></g><g class="participant participant-head" data-participant="CP2"><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="26.2773" x="62.2773" y="116.0234">CP2</text><ellipse cx="78.416" cy="50.9883" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M78.416,58.9883 L78.416,85.9883 M65.416,66.9883 L91.416,66.9883 M78.416,85.9883 L65.416,100.9883 M78.416,85.9883 L91.416,100.9883" fill="none" style="stroke:#181818;stroke-width:0.5;"/></g><g class="participant participant-tail" data-participant="CP2"><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="26.2773" x="62.2773" y="1496.8438">CP2</text><ellipse cx="78.416" cy="1508.2969" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M78.416,1516.2969 L78.416,1543.2969 M65.416,1524.2969 L91.416,1524.2969 M78.416,1543.2969 L65.416,1558.2969 M78.416,1543.2969 L91.416,1558.2969" fill="none" style="stroke:#181818;stroke-width:0.5;"/></g><g class="participant participant-head" data-participant="SDC"><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="41.7129" x="274.626" y="87.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="27.7129" x="281.626" y="108.0234">SDC</text></g><g class="participant participant-tail" data-participant="SDC"><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="41.7129" x="274.626" y="1483.3086"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="27.7129" x="281.626" y="1503.8438">SDC</text></g><g class="participant participant-head" data-participant="SettlementToken"><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="128.5771" x="776.3071" y="87.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="114.5771" x="783.3071" y="108.0234">SettlementToken</text></g><g class="participant participant-tail" data-participant="SettlementToken"><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="128.5771" x="776.3071" y="1483.3086"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="114.5771" x="783.3071" y="1503.8438">SettlementToken</text></g><g class="participant participant-head" data-participant="EventHandler"><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="103.6533" x="914.8843" y="87.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="89.6533" x="921.8843" y="108.0234">EventHandler</text></g><g class="participant participant-tail" data-participant="EventHandler"><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="103.6533" x="914.8843" y="1483.3086"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="89.6533" x="921.8843" y="1503.8438">EventHandler</text></g><g class="participant participant-head" data-participant="ValuationService"><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="125.2549" x="1078.8428" y="87.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="111.2549" x="1085.8428" y="108.0234">ValuationService</text></g><g class="participant participant-tail" data-participant="ValuationService"><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="125.2549" x="1078.8428" y="1483.3086"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="111.2549" x="1085.8428" y="1503.8438">ValuationService</text></g><g><title>CP1</title><rect fill="#FFFFFF" height="1346.332" style="stroke:#181818;stroke-width:1;" width="10" x="31.1387" y="128.9766"/></g><g><title>CP2</title><rect fill="#FFFFFF" height="1346.332" style="stroke:#181818;stroke-width:1;" width="10" x="73.416" y="128.9766"/></g><g><title>SDC</title><rect fill="#FFFFFF" height="1242.0898" style="stroke:#181818;stroke-width:1;" width="10" x="290.4824" y="233.2188"/></g><g><title>SettlementToken</title><rect fill="#FFFFFF" height="1346.332" style="stroke:#181818;stroke-width:1;" width="10" x="835.5957" y="128.9766"/></g><g><title>EventHandler</title><rect fill="#FFFFFF" height="1346.332" style="stroke:#181818;stroke-width:1;" width="10" x="961.7109" y="128.9766"/></g><g><title>ValuationService</title><rect fill="#FFFFFF" height="1346.332" style="stroke:#181818;stroke-width:1;" width="10" x="1136.4702" y="128.9766"/></g><path d="M10,135.9766 L156.0039,135.9766 L156.0039,143.2871 L146.0039,153.2871 L10,153.2871 L10,135.9766" fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="570.5898" style="stroke:#000000;stroke-width:1.5;" width="1018.5376" x="10" y="135.9766"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="101.0039" x="25" y="149.5449">Initialize Trade</text><g class="message" data-participant-1="CP1" data-participant-2="SettlementToken"><polygon fill="#181818" points="823.5957,170.5977,833.5957,174.5977,823.5957,178.5977,827.5957,174.5977" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="41.1387" x2="829.5957" y1="174.5977" y2="174.5977"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="107.6309" x="48.1387" y="169.8555">allocate balances</text></g><g class="message" data-participant-1="CP2" data-participant-2="SettlementToken"><polygon fill="#181818" points="823.5957,199.9082,833.5957,203.9082,823.5957,207.9082,827.5957,203.9082" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="83.416" x2="829.5957" y1="203.9082" y2="203.9082"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="107.6309" x="90.416" y="199.166">allocate balances</text></g><g class="message" data-participant-1="CP1" data-participant-2="SDC"><polygon fill="#181818" points="278.4824,229.2188,288.4824,233.2188,278.4824,237.2188,282.4824,233.2188" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="41.1387" x2="284.4824" y1="233.2188" y2="233.2188"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="230.3438" x="48.1387" y="228.4766">tx 'deploy' a SDC with token address</text></g><g class="message" data-participant-1="CP1" data-participant-2="SDC"><polygon fill="#181818" points="278.4824,258.5293,288.4824,262.5293,278.4824,266.5293,282.4824,262.5293" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="41.1387" x2="284.4824" y1="262.5293" y2="262.5293"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="97.8174" x="48.1387" y="257.7871">tx 'inceptTrade'</text></g><g class="message" data-participant-1="SDC" data-participant-2="EventHandler"><polygon fill="#181818" points="949.7109,287.8398,959.7109,291.8398,949.7109,295.8398,953.7109,291.8398" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="300.4824" x2="955.7109" y1="291.8398" y2="291.8398"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="122.4399" x="307.4824" y="287.0977">emit TradeIncepted</text></g><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1;" width="1224.0977" x="0" y="320.4951"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="1224.0977" y1="320.4951" y2="320.4951"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="1224.0977" y1="323.4951" y2="323.4951"/><rect fill="#EEEEEE" height="23.3105" style="stroke:#000000;stroke-width:2;" width="158.4663" x="532.8157" y="309.8398"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="140.1816" x="538.8157" y="326.4082">TradeState 'Incepted'</text><g class="message" data-participant-1="CP2" data-participant-2="SDC"><polygon fill="#181818" points="278.4824,360.4609,288.4824,364.4609,278.4824,368.4609,282.4824,364.4609" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="83.416" x2="284.4824" y1="364.4609" y2="364.4609"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="107.7515" x="90.416" y="359.7188">tx 'confirmTrade'</text></g><g class="message" data-participant-1="SDC" data-participant-2="SDC"><line style="stroke:#181818;stroke-width:1;" x1="300.4824" x2="342.4824" y1="393.7715" y2="393.7715"/><line style="stroke:#181818;stroke-width:1;" x1="342.4824" x2="342.4824" y1="393.7715" y2="406.7715"/><line style="stroke:#181818;stroke-width:1;" x1="301.4824" x2="342.4824" y1="406.7715" y2="406.7715"/><polygon fill="#181818" points="311.4824,402.7715,301.4824,406.7715,311.4824,410.7715,307.4824,406.7715" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="113.1914" x="307.4824" y="389.0293">validate tradedata</text></g><g class="message" data-participant-1="SDC" data-participant-2="EventHandler"><polygon fill="#181818" points="949.7109,432.082,959.7109,436.082,949.7109,440.082,953.7109,436.082" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="300.4824" x2="955.7109" y1="436.082" y2="436.082"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="134.7227" x="307.4824" y="431.3398">emit TradeConfirmed</text></g><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1;" width="1224.0977" x="0" y="464.7373"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="1224.0977" y1="464.7373" y2="464.7373"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="1224.0977" y1="467.7373" y2="467.7373"/><rect fill="#EEEEEE" height="23.3105" style="stroke:#000000;stroke-width:2;" width="171.4346" x="526.3315" y="454.082"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="153.1499" x="532.3315" y="470.6504">TradeState 'Confirmed'</text><g class="message" data-participant-1="SDC" data-participant-2="SettlementToken"><polygon fill="#181818" points="823.5957,520.0137,833.5957,524.0137,823.5957,528.0137,827.5957,524.0137" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="300.4824" x2="829.5957" y1="524.0137" y2="524.0137"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="337.4033" x="307.4824" y="503.9609">tx 'transferFrom' margin buffers and termination fees</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="202.9346" x="307.4824" y="519.2715">to SDC address for CP1 and CP2</text></g><g class="message" data-participant-1="SDC" data-participant-2="SettlementToken"><polygon fill="#181818" points="823.5957,549.3242,833.5957,553.3242,823.5957,557.3242,827.5957,553.3242" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="300.4824" x2="829.5957" y1="553.3242" y2="553.3242"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="434.332" x="307.4824" y="548.582">tx 'transferFrom' optional Upfront Fee from Paying to Receiving Party</text></g><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1;" width="1224.0977" x="0" y="581.9795"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="1224.0977" y1="581.9795" y2="581.9795"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="1224.0977" y1="584.9795" y2="584.9795"/><rect fill="#EEEEEE" height="23.3105" style="stroke:#000000;stroke-width:2;" width="171.0601" x="526.5188" y="571.3242"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="152.7754" x="532.5188" y="587.8926">TradeState 'inTransfer'</text><g class="message" data-participant-1="SettlementToken" data-participant-2="SDC"><polygon fill="#181818" points="311.4824,621.9453,301.4824,625.9453,311.4824,629.9453,307.4824,625.9453" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="305.4824" x2="834.5957" y1="625.9453" y2="625.9453"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="160.126" x="317.4824" y="621.2031">callback tx 'afterTransfer'</text></g><g class="message" data-participant-1="SDC" data-participant-2="EventHandler"><polygon fill="#181818" points="949.7109,651.2559,959.7109,655.2559,949.7109,659.2559,953.7109,655.2559" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="300.4824" x2="955.7109" y1="655.2559" y2="655.2559"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="126.6992" x="307.4824" y="650.5137">emit TradeActivated</text></g><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1;" width="1224.0977" x="0" y="683.9111"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="1224.0977" y1="683.9111" y2="683.9111"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="1224.0977" y1="686.9111" y2="686.9111"/><rect fill="#EEEEEE" height="23.3105" style="stroke:#000000;stroke-width:2;" width="159.6787" x="532.2095" y="673.2559"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="141.394" x="538.2095" y="689.8242">ProcessState 'Settled'</text><path d="M10,720.5664 L84.4468,720.5664 L84.4468,727.877 L74.4468,737.877 L10,737.877 L10,720.5664" fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="746.7422" style="stroke:#000000;stroke-width:1.5;" width="1204.0977" x="10" y="720.5664"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="29.4468" x="25" y="734.1348">loop</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="103.2324" x="99.4468" y="733.2012">[Every Settlement]</text><g class="message" data-participant-1="CP1" data-participant-2="SDC"><polygon fill="#181818" points="278.4824,755.1875,288.4824,759.1875,278.4824,763.1875,282.4824,759.1875" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="41.1387" x2="284.4824" y1="759.1875" y2="759.1875"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="137.7822" x="48.1387" y="754.4453">tx: 'initiateSettlement'</text></g><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1;" width="1224.0977" x="0" y="787.8428"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="1224.0977" y1="787.8428" y2="787.8428"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="1224.0977" y1="790.8428" y2="790.8428"/><rect fill="#EEEEEE" height="23.3105" style="stroke:#000000;stroke-width:2;" width="164.4395" x="529.8291" y="777.1875"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="146.1548" x="535.8291" y="793.7559">TradeState 'Valuation'</text><g class="message" data-participant-1="SDC" data-participant-2="EventHandler"><polygon fill="#181818" points="949.7109,827.8086,959.7109,831.8086,949.7109,835.8086,953.7109,831.8086" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="300.4824" x2="955.7109" y1="831.8086" y2="831.8086"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="165.2612" x="307.4824" y="827.0664">emit SettlementRequested</text></g><g class="message" data-participant-1="EventHandler" data-participant-2="ValuationService"><polygon fill="#181818" points="1124.4702,857.1191,1134.4702,861.1191,1124.4702,865.1191,1128.4702,861.1191" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="971.7109" x2="1130.4702" y1="861.1191" y2="861.1191"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="140.7593" x="978.7109" y="856.377">request valuation data</text></g><g class="message" data-participant-1="ValuationService" data-participant-2="EventHandler"><polygon fill="#181818" points="982.7109,886.4297,972.7109,890.4297,982.7109,894.4297,978.7109,890.4297" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="976.7109" x2="1135.4702" y1="890.4297" y2="890.4297"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="132.0947" x="988.7109" y="885.6875">return valuation data</text></g><g class="message" data-participant-1="EventHandler" data-participant-2="SDC"><polygon fill="#181818" points="311.4824,915.7402,301.4824,919.7402,311.4824,923.7402,307.4824,919.7402" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="305.4824" x2="960.7109" y1="919.7402" y2="919.7402"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="200.3447" x="317.4824" y="914.998">callback: tx 'performSettlement'</text></g><g class="message" data-participant-1="SDC" data-participant-2="SDC"><line style="stroke:#181818;stroke-width:1;" x1="300.4824" x2="342.4824" y1="949.0508" y2="949.0508"/><line style="stroke:#181818;stroke-width:1;" x1="342.4824" x2="342.4824" y1="949.0508" y2="962.0508"/><line style="stroke:#181818;stroke-width:1;" x1="301.4824" x2="342.4824" y1="962.0508" y2="962.0508"/><polygon fill="#181818" points="311.4824,958.0508,301.4824,962.0508,311.4824,966.0508,307.4824,962.0508" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="298.27" x="307.4824" y="944.3086">Caps Settlement Amount at Margin Buffer Level</text></g><g class="message" data-participant-1="SDC" data-participant-2="EventHandler"><polygon fill="#181818" points="949.7109,987.3613,959.7109,991.3613,949.7109,995.3613,953.7109,991.3613" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="300.4824" x2="955.7109" y1="991.3613" y2="991.3613"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="173.1831" x="307.4824" y="986.6191">emit SettlementDetermined</text></g><g class="message" data-participant-1="SDC" data-participant-2="SettlementToken"><polygon fill="#181818" points="823.5957,1016.6719,833.5957,1020.6719,823.5957,1024.6719,827.5957,1020.6719" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="300.4824" x2="829.5957" y1="1020.6719" y2="1020.6719"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="511.1133" x="307.4824" y="1015.9297">tx 'transferFrom' settlement amount from Paying Party to Receiving Party Balance</text></g><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1;" width="1224.0977" x="0" y="1049.3271"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="1224.0977" y1="1049.3271" y2="1049.3271"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="1224.0977" y1="1052.3271" y2="1052.3271"/><rect fill="#EEEEEE" height="23.3105" style="stroke:#000000;stroke-width:2;" width="171.0601" x="526.5188" y="1038.6719"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="152.7754" x="532.5188" y="1055.2402">TradeState 'inTransfer'</text><path d="M264.626,1078.9824 L326.7646,1078.9824 L326.7646,1086.293 L316.7646,1096.293 L264.626,1096.293 L264.626,1078.9824" fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="381.3262" style="stroke:#000000;stroke-width:1.5;" width="763.9116" x="264.626" y="1078.9824"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="17.1387" x="279.626" y="1092.5508">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="94.6064" x="341.7646" y="1091.6172">[Transfer Check]</text><g class="message" data-participant-1="SettlementToken" data-participant-2="SDC"><polygon fill="#181818" points="311.4824,1113.6035,301.4824,1117.6035,311.4824,1121.6035,307.4824,1117.6035" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="305.4824" x2="834.5957" y1="1117.6035" y2="1117.6035"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="160.126" x="317.4824" y="1112.8613">callback tx 'afterTransfer'</text></g><g class="message" data-participant-1="SDC" data-participant-2="SDC"><line style="stroke:#181818;stroke-width:1;" x1="300.4824" x2="342.4824" y1="1146.9141" y2="1146.9141"/><line style="stroke:#181818;stroke-width:1;" x1="342.4824" x2="342.4824" y1="1146.9141" y2="1159.9141"/><line style="stroke:#181818;stroke-width:1;" x1="301.4824" x2="342.4824" y1="1159.9141" y2="1159.9141"/><polygon fill="#181818" points="311.4824,1155.9141,301.4824,1159.9141,311.4824,1163.9141,307.4824,1159.9141" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="102.6162" x="307.4824" y="1142.1719">'afterSettlement'</text></g><line style="stroke:#000000;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="264.626" x2="1028.5376" y1="1168.9141" y2="1168.9141"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="52.1909" x="269.626" y="1179.5488">[success]</text><g class="message" data-participant-1="SDC" data-participant-2="EventHandler"><polygon fill="#181818" points="949.7109,1200.1797,959.7109,1204.1797,949.7109,1208.1797,953.7109,1204.1797" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="300.4824" x2="955.7109" y1="1204.1797" y2="1204.1797"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="172.8911" x="307.4824" y="1199.4375">emit SettlementTransferred</text></g><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1;" width="1224.0977" x="0" y="1232.835"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="1224.0977" y1="1232.835" y2="1232.835"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="1224.0977" y1="1235.835" y2="1235.835"/><rect fill="#EEEEEE" height="23.3105" style="stroke:#000000;stroke-width:2;" width="147.0088" x="538.5444" y="1222.1797"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="128.7241" x="544.5444" y="1238.748">TradeState 'Settled'</text><line style="stroke:#000000;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="264.626" x2="1028.5376" y1="1256.4902" y2="1256.4902"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="26.3345" x="269.626" y="1267.125">[fail]</text><g class="message" data-participant-1="SDC" data-participant-2="EventHandler"><polygon fill="#181818" points="949.7109,1287.7559,959.7109,1291.7559,949.7109,1295.7559,953.7109,1291.7559" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="300.4824" x2="955.7109" y1="1291.7559" y2="1291.7559"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="136.481" x="307.4824" y="1287.0137">emit SettlementFailed</text></g><g class="message" data-participant-1="SDC" data-participant-2="SettlementToken"><polygon fill="#181818" points="823.5957,1317.0664,833.5957,1321.0664,823.5957,1325.0664,827.5957,1321.0664" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="300.4824" x2="829.5957" y1="1321.0664" y2="1321.0664"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="430.0601" x="307.4824" y="1316.3242">tx 'transfer' Settlement Amount from SDC Balance to Receiving Party</text></g><g class="message" data-participant-1="SDC" data-participant-2="SettlementToken"><polygon fill="#181818" points="823.5957,1346.377,833.5957,1350.377,823.5957,1354.377,827.5957,1350.377" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="300.4824" x2="829.5957" y1="1350.377" y2="1350.377"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="410.7441" x="307.4824" y="1345.6348">tx 'transfer' Termination Fee from SDC Balance to Receiving Party</text></g><g class="message" data-participant-1="SDC" data-participant-2="SettlementToken"><polygon fill="#181818" points="823.5957,1375.6875,833.5957,1379.6875,823.5957,1383.6875,827.5957,1379.6875" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="300.4824" x2="829.5957" y1="1379.6875" y2="1379.6875"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="326.5615" x="307.4824" y="1374.9453">tx 'transfer' - Release remaining balances to parties</text></g><g class="message" data-participant-1="SDC" data-participant-2="EventHandler"><polygon fill="#181818" points="949.7109,1404.998,959.7109,1408.998,949.7109,1412.998,953.7109,1408.998" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="300.4824" x2="955.7109" y1="1408.998" y2="1408.998"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="140.4673" x="307.4824" y="1404.2559">emit TradeTerminated</text></g><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1;" width="1224.0977" x="0" y="1437.6533"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="1224.0977" y1="1437.6533" y2="1437.6533"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="1224.0977" y1="1440.6533" y2="1440.6533"/><rect fill="#EEEEEE" height="23.3105" style="stroke:#000000;stroke-width:2;" width="177.979" x="523.0593" y="1426.998"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="159.6943" x="529.0593" y="1443.5664">TradeState 'Terminated'</text><!--SRC=[bLR1Rjim33tNNy6RJrwn7WCaGEUiM84D29fifrrKcKw4of8dozwohnybkRRiP6cQG-j8rEFZunETz61jtInkRsl9b6qh-O7hwhR1NoqgZbaXsDwmAh72IeHjnOnTen4TiwB3N2jh6BVmMzW3RD5IJ8NAPZlzWWgOAa2NPSOFJ2ZumMHBfxIYGDC9ZaboGsUrWNppSNoye-MQiWWkQY84stMU942VoUAGocUQ7VdSqSONoYxHJ7S63WC5IkkAmUcXONMUQDYuWEJAYRvGGNkZsneUbR22IV4NOMTOWGa5GhQQfLW0ar9pT_QPKKiuDXHuTssWHrpd2x1_82smblgO0dCgXYRPq9cYCDWqKPsaSdHu_d5WWZBKrZDFauJ2icmLYxO0h8GDfJtwM2oIvJ8iRAtBahwkfx1SXgvIQH5XhbKfJDKdSVikJzZlIBh2eLYtIqyi6IB-poGFY4HbpcNO6SaubR8Ld0Zjg55MrPHe7eokKg1xi2TFFxSbBJNUwHPD9LHmU8dO_5HMUyHUR2Y3rNsmiyNxCkhQ8JC9t-lIqBs31qIWfmesx2ZKdZeBJyXHTExBXan_z2LFQXPgruD6HKzpzsfpCjSpuo-U2IkfkE7aDRBVzyRoic-C9dCsFOUGhrST5KL8hMjt_ymn8fCapf23DnQElBi_5iUOzAIfmxNqy6SuUeeZmfERSutd6OTbg_dzNe09eSw7_Hpp7fm7pZKnQ5kZvgUcoIQAX-RNQCWlLLphS1LoLZTH3N1VwPR-CGlVWYq_ULl2L-nGNhYg8yGQWtkT3Y7DsuPiHW8i48ZTw0runfFmASogUUFcpcJIEyclG7v0_fBSlD-fqmaITcD9KJO8JSkTFI-xEihTevlJyHPRsqENJCXhSHyerkb_ytO3qZFTz-AxST8BV6uUN0MzY-ROC6FU01vrleoTqKc9Z9GnMD6F0eVm-l9okFvTJU-nAoRCAytJBemxeH5knFY__m00]--></g></svg>