---
eip: 8114
title: NFT Transfer With Signature
description: Off-chain NFT transfer signature extension for ERC-7564 compliant smart contract wallets
author: Xiang (@wenzhenxiang)
discussions-to: https://ethereum-magicians.org/t/erc-8114-nft-transfer-with-signature/27312
status: Draft
type: Standards Track
category: ERC
created: 2025-12-25
requires: 712, 7564
---

## Abstract

This proposal extends [ERC-7564](./eip-7564.md) compliant smart contract wallets with an off-chain signature flow for NFT transfers, allowing wallet owners to delegate transfers via typed-data signatures presented by any relayer. The extension defines a canonical [EIP-712](./eip-712.md) schema, nonce accounting, and execution requirements for compliant implementations.
Unlike NFT-native standards, this extension operates at the wallet level, enabling gasless transfers for any [ERC-721](./eip-721.md) NFT without requiring NFT contract modifications.

## Motivation
ERC-7564 enables programmable asset management directly in smart contract wallets but requires on-chain transactions for every NFT transfer. This creates friction for gasless use cases such as gifting, claimable drops, custodial listings, and relayer-sponsored transfers.

By implementing authorization at the ERC-7564 compliant wallet level, this extension enables gasless transfers for *all* ERC-721 NFTs managed by the wallet, significantly expanding the reach of gasless NFT applications.

A standardized off-chain transfer signature reduces bespoke integrations and paves the way for widespread adoption of NFT-based interactions in Web3.

## Specification

The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT", "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this document are to be interpreted as described in RFC 2119 and RFC 8174.

Compliant ERC-7564 implementations that support this extension MUST include the following functions and behavior.

### Interface

```solidity
interface IERC8114 {
    function nftTransferNonce(address asset, address to) external view returns (uint256);

    function nftTransferWithSig(
        address asset,
        uint256 tokenId,
        address to,
        uint256 deadline,
        bytes calldata signature
    ) external returns (bool success);
}
```

- `nftTransferNonce` MUST return a monotonically increasing nonce scoped to `(asset, to)`.
- `nftTransferWithSig` MUST verify the signature via `isValidSignature`, reject expired signatures (unless `deadline == 0`), increment the nonce before performing the transfer, and execute the same logic as `nftTransfer` in ERC-7564.

Implementations MUST support wallets that validate signatures through [ERC-1271](./eip-1271.md). Wallets MAY wrap signatures but the module MUST unwrap them prior to verification.

### Typed Data

Compliant implementations MUST use the following EIP-712 typed data structure. The `wallet` field identifies the smart contract wallet that will execute the transfer.
| Function | Primary Type | Fields |
|----------|--------------|--------|
| `nftTransferWithSig` | `NFTTransferWithSig` | `wallet`, `asset`, `to`, `tokenId`, `nonce`, `deadline` |

Every permit MUST use the EIP-712 domain:

- `name = "NFTManage Transfer"`
- `version = "1"`
- `chainId` equal to the executing chain
- `verifyingContract = address(this)`

### Nonce Semantics

- `nftTransferNonce` MUST be scoped per `(asset, to)`.

Each `WithSig` function MUST increment its nonce immediately before state changes and MUST revert on signature reuse.

### Execution Requirements

Implementations MUST:

1. Treat `deadline = 0` as non-expiring; otherwise enforce `block.timestamp <= deadline`.
2. Recover the signer from the EIP-712 digest. Validate the digest using ERC-1271 on the wallet address. The recovered/validated signer MUST be authorized to act on behalf of the wallet (typically its owner).
3. Verify the provided nonce matches the current stored nonce for the corresponding scope.
4. Increment the scoped nonce before invoking the underlying ERC-7564 function.
5. Emit the same events as the underlying ERC-7564 functions.
6. Revert if signature validation fails, inputs mismatch, or deadlines are exceeded.

Wallets MAY offer helper wrappers, but they MUST NOT alter the semantics described above.

## Rationale

- Reusing the existing ERC-7564 entry points keeps events and accounting compatible with current deployments.
- This wallet-level approach supports gasless transfers for all ERC-721 NFTs, including those without native off-chain authorization mechanisms.

## Backwards Compatibility

Existing ERC-7564 implementations remain valid. Clients SHOULD feature-detect permit support by checking for `IERC8114` via [ERC-165](./eip-165.md) or probing the new function selectors.

## Test Cases

A public test suite will accompany the reference implementation. Implementers are encouraged to cover:

- successful submissions for transfers by signature relayers,
- rejection of expired, replayed, or mismatched signatures,
- nonce increment behaviour when NFT interactions revert,
- replay protection across all nonce scopes.

## Reference Implementation

A reference implementation will be published after community review. It validates the typed-data digest, increments the scoped nonce before external calls, and delegates to existing ERC-7564 functions so that storage and events remain unchanged.

## Security Considerations

- Nonces MUST increment even if downstream NFT interactions revert.
- Wallet owners SHOULD use bounded deadlines to reduce the risk of long-lived signatures.

## Copyright

Copyright and related rights waived via [CC0](../LICENSE.md).
